<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <title>WebGIS开发-吴陶然</title>

    <link rel="shortcut icon" href="map.ico">
    <link rel="stylesheet" type="text/css" href="resources/css/style_.css">
    <link rel="stylesheet" href="resources/css/popup.css">
    <link rel="stylesheet" href="resources/css/settings.css">
    <link rel="stylesheet" href="resources/css/markers.css">
    <link rel="stylesheet" href="resources/css/layout.css">
    <link rel="stylesheet" href="resources/css/map.css">

    <!-- all use local resources to ensure offline functionality and faster loading times. -->
    <!-- OpenLayers CSS -->
    <link rel="stylesheet" href="resources/lib/ol.css">
    <!-- Proj4js for coordinate transformations -->
    <script src="resources/lib/proj4.js"></script>
    <!-- OpenLayers JS -->
    <script src="resources/lib/ol.js"></script>
    <!-- shpjs for client-side shapefile parsing -->
    <script src="resources/lib/shp.js"></script>
    <!-- JSZip for extracting ZIP files -->
    <script src="resources/lib/jszip.min.js"></script>
</head>

<body>
    <div class="top-header">
        <div>GIS开发</div>
        <div class="top-header-actions">
            
            
            <button class="right-button" onclick="showShapefileUploadDialog()" title="上传本地 Shapefile">上传 SHP</button>
            <button class="right-button" onclick="toggleLocalMarkerMode()" id="addLocalMarkerBtn" title="添加本地标注（保存在浏览器）">本地标注</button>
            <button class="right-button" onclick="showLocalMarkersManager()" title="管理本地标注">标注管理</button>
            <button class="right-button" onclick="showSpatialAnalysisDialog()" title="空间句法分析">空间分析</button>
            <button class="right-button" onclick="Settting()">在线图层</button>
        </div>
    </div>

    <div id="mapFrame">
        <div id="container"></div>
        <div id="loading">地图加载中...</div>
    </div>

    <div class="bottom-actions">
        <button onclick="showAbout()" class="action-button">关于</button>
        <button onclick="showSpatialAnalysisDialog()" class="action-button">空间分析</button>
        <button onclick="location.href='../'" class="action-button">返回主界面</button>
        <button onclick="location.href='documents/manual.html'" class="action-button">帮助文档</button>
    </div>

    <!-- JavaScript 文件 - 按依赖顺序加载 -->
    <script src="resources/js/config.js"></script>
    <script src="resources/js/utils.js"></script>
    <script src="resources/js/coordinate-utils.js"></script>
    <script src="resources/js/map-core.js"></script>
    <script src="resources/js/wms-layers.js"></script>
    <script src="resources/js/geoserver.js"></script>
    <script src="resources/js/settings.js"></script>
    <script src="resources/js/local-markers.js"></script>
    <!-- WASM 加速模块（可选，如果不可用会自动回退到 JS 实现） -->
    <script src="resources/wasm/spatial_analysis.js"></script>
    <script src="resources/js/wasm-loader.js"></script>
    <script src="resources/js/wasm-integration.js"></script>
    <!-- 本地 Shapefile 加载模块 -->
    <script src="resources/js/segment-splitter.js"></script>
    <script src="resources/js/layer-storage.js"></script>
    <script src="resources/js/shapefile-loader.js"></script>
    <script src="resources/js/shapefile-writer.js"></script>
    <script src="resources/js/local-analysis.js"></script>
    <!-- Spatial Analysis算法模块（必须在 spacial_analyse.js 之前加载） -->
    <script src="resources/js/integration.js"></script>
    <script src="resources/js/connection.js"></script>
    <!-- WebGPU 加速模块 -->
    <script src="resources/js/webgpu-integration.js"></script>
    <script src="resources/js/spacial_analyse.js"></script>
    <script src="resources/js/main.js"></script>
</body>

</html>
